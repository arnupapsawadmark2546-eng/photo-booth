<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Photo Booth</title>
  <style>
    body {
      font-family: Arial;
      background: #f5f5f5;
      text-align: center;
    }
    video {
      width: 300px;
      border-radius: 12px;
    }
    button {
      padding: 12px 24px;
      font-size: 16px;
      margin: 10px;
    }
    #countdown {
      font-size: 48px;
      color: #ff4d4d;
      margin: 10px;
    }
    canvas {
      display: none;
    }
    #frame {
      margin-top: 20px;
    }
  </style>
</head>
<body>

<h2>ðŸ“¸ Korean Photo Booth</h2>

<div id="countdown"></div>
<video id="video" autoplay></video><br>

<button onclick="startBooth()">à¹€à¸£à¸´à¹ˆà¸¡à¸–à¹ˆà¸²à¸¢</button>

<canvas id="canvas"></canvas>

<div id="frame"></div>

<script>
  const frameDiv = document.getElementById("frame");
  const video = document.getElementById("video");
  const canvas = document.getElementById("canvas");
  const ctx = canvas.getContext("2d");
  const countdownEl = document.getElementById("countdown");
  const frameDiv = document.getElementById("frame");

  navigator.mediaDevices.getUserMedia({ video: true })
    .then(stream => video.srcObject = stream);

  let photos = [];

  function startBooth() {
    photos = [];
    frameDiv.innerHTML = "";
    takeWithCountdown(4);
  }

  function takeWithCountdown(remaining) {
    if (remaining === 0) {
      createFrame();
      return;
    }

    let count = 3;
    countdownEl.innerText = count;

    const timer = setInterval(() => {
      count--;
      if (count === 0) {
        clearInterval(timer);
        countdownEl.innerText = "ðŸ“¸";
        takePhoto();
        setTimeout(() => {
          countdownEl.innerText = "";
          takeWithCountdown(remaining - 1);
        }, 800);
      } else {
        countdownEl.innerText = count;
      }
    }, 1000);
  }

  function takePhoto() {
    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;
    ctx.drawImage(video, 0, 0);
    photos.push(canvas.toDataURL("image/png"));
  }
const caption = document.getElementById("captionInput").value || "";
function createFrame() {
  if (photos.length < 4) return;

  frameDiv.innerHTML = "";

  const caption = document.getElementById("captionInput").value || "";

  const frameCanvas = document.createElement("canvas");
  const fctx = frameCanvas.getContext("2d");

  const padding = 30;
  const bottomSpace = 70;

  const images = [];
  let loaded = 0;

  photos.forEach((src, i) => {
    const img = new Image();
    img.src = src;
    img.onload = () => {
      images[i] = img;
      loaded++;
      if (loaded === photos.length) draw();
    };
  });

  function draw() {
    const w = images[0].width;
    const h = images[0].height;

    frameCanvas.width = w * 2 + padding * 3;
    frameCanvas.height = h * 2 + padding * 3 + bottomSpace;

    // à¸žà¸·à¹‰à¸™à¸«à¸¥à¸±à¸‡à¸‚à¸²à¸§ (à¸à¸£à¸­à¸š)
    fctx.fillStyle = "#fff";
    fctx.fillRect(0, 0, frameCanvas.width, frameCanvas.height);

    // à¸§à¸²à¸”à¸£à¸¹à¸›
    images.forEach((img, i) => {
      const x = padding + (i % 2) * (w + padding);
      const y = padding + Math.floor(i / 2) * (h + padding);
      fctx.drawImage(img, x, y, w, h);
    });

    // à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹ƒà¸•à¹‰à¸£à¸¹à¸›
    fctx.fillStyle = "#000";
    fctx.font = "24px Arial";
    fctx.textAlign = "center";
    fctx.fillText(
      caption,
      frameCanvas.width / 2,
      frameCanvas.height - 25
    );

    const result = document.createElement("img");
    result.src = frameCanvas.toDataURL("image/png");
    result.style.width = "300px";
    frameDiv.appendChild(result);
  }
}

<br>
<input 
  id="captionInput" 
  type="text" 
  placeholder="à¸žà¸´à¸¡à¸žà¹Œà¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹ƒà¸•à¹‰à¸£à¸¹à¸›..."
  style="padding:10px; width:260px; font-size:16px; text-align:center;"
</script>

</body>
</html>
